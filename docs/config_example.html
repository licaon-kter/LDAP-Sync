

<a href="javascript:" id="confUrl">Click here to configure LDAP-Sync</a>

<span id="confQr"></span>

<!-- QR code library - get it from here: https://raw.githubusercontent.com/davidshimjs/qrcodejs/master/qrcode.min.js -->

<script src="qrcode.min.js"></script>
<script>
	// Define the parameters - change this according to your requirements
	var host = "ldap.example.org";
	var username = "jondoe";  // this might be read from an input field, from server side, or just ommitted, then the user has to enter it later on
	var baseDN = "cn=example,cn=org";
	var params = {
		user: "uid=" + username + "," + baseDN,
		accountName: "My little LDAP",
		cfg_baseDN: baseDN,
		cfg_searchFilter: "(objectClass=inetOrgPerson)",
		skip: "1",
		/* ... add more parameters here, if required */
	}

	// Build the URL
	var url = "ldaps://"+host+"/?";
	for (var k in params) url += k + "=" + encodeURIComponent(params[k]) + "&";

	// Set URL in link tag
	document.getElementById("confUrl").href = url;

	// Generate QR code
	new QRCode(document.getElementById("confQr"), {
			   text: url,
			   width: 400,
			   height: 400,
			   colorDark : "#000000",
			   colorLight : "#ffffff",
			   correctLevel : QRCode.CorrectLevel.H
			   });
		   
</script>

